{"id":"google-workspace-tools-4qe","title":"Add agentic CLI next-step hints","description":"Per agentic CLI design patterns, every command output should suggest logical next actions.\n\n## Add to cli/utils.py\n```python\ndef print_next_steps(formatter, hints: list[tuple[str, str]]) -\u003e None:\n    \"\"\"Print next-step hints for agentic CLI.\"\"\"\n    formatter.print_info(\"\\nNext steps:\")\n    for cmd, desc in hints:\n        formatter.print_info(f\"  {cmd:\u003c30} {desc}\")\n```\n\n## Update Commands\n- [ ] download: suggest `gwt mail`, `gwt calendar` for related exports\n- [ ] mail: suggest `gwt download \u003clink\u003e` if Drive links found\n- [ ] calendar: suggest related commands\n- [ ] credentials login: suggest `gwt download` to start exporting\n- [ ] credentials status: suggest `gwt credentials login` if not authenticated\n- [ ] formats: suggest `gwt download` with example\n\n## Reference\nSee: agentic-cli.md Pattern 1 (Sensible Defaults with Next-Step Hints)","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-12T17:47:49.221155+01:00","created_by":"mhild","updated_at":"2026-01-12T17:47:49.221155+01:00"}
{"id":"google-workspace-tools-62l","title":"Create CLI error handling decorator","description":"The same error handling pattern is repeated ~10 times across commands:\n\n```python\nexcept FileNotFoundError as e:\n    formatter.print_error(f\"Error: {e}\")\n    formatter.print_info(\"Run 'gwt auth' to set up authentication\")\n    raise typer.Exit(1) from e\nexcept Exception as e:\n    formatter.print_error(f\"Error: {e}\")\n    raise typer.Exit(1) from e\n```\n\n## Proposed Solution\nAdd to `cli/utils.py`:\n\n```python\n@contextmanager\ndef cli_error_handler(formatter):\n    \"\"\"Context manager for consistent CLI error handling.\"\"\"\n    try:\n        yield\n    except FileNotFoundError as e:\n        formatter.print_error(f\"Error: {e}\")\n        formatter.print_info(\"Run 'gwt credentials login' to authenticate\")\n        raise typer.Exit(1) from e\n    except typer.Exit:\n        raise\n    except Exception as e:\n        formatter.print_error(f\"Error: {e}\")\n        raise typer.Exit(1) from e\n```\n\n## Benefits\n- DRY principle\n- Consistent error messages\n- Single place to add new error types (e.g., rate limiting)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T17:47:48.096566+01:00","created_by":"mhild","updated_at":"2026-01-12T17:47:48.096566+01:00","dependencies":[{"issue_id":"google-workspace-tools-62l","depends_on_id":"google-workspace-tools-hlt","type":"blocks","created_at":"2026-01-12T17:47:56.665485+01:00","created_by":"mhild"}]}
{"id":"google-workspace-tools-8as","title":"Extract calendar command helper functions","description":"The calendar command handles 3 distinct operations in one function (~228 lines):\n1. List calendars (no filters)\n2. Fetch single event (`--event-id`)\n3. Batch export (with date filters)\n\n## Refactoring\n- [ ] Extract `_export_single_event()` helper\n- [ ] Consider if subcommands make sense: `calendar list`, `calendar export`, `calendar get`\n- [ ] Reduce cognitive load of the main calendar function\n\n## Current Issues\n- Single function with multiple exit paths\n- Event export logic (~60 lines) duplicated between single/batch modes\n- Hard to test individual behaviors","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T17:47:46.923942+01:00","created_by":"mhild","updated_at":"2026-01-12T17:47:46.923942+01:00","dependencies":[{"issue_id":"google-workspace-tools-8as","depends_on_id":"google-workspace-tools-hlt","type":"blocks","created_at":"2026-01-12T17:47:56.559805+01:00","created_by":"mhild"}]}
{"id":"google-workspace-tools-fx4","title":"Add default status action for gwt command","description":"Per agentic CLI patterns, running `gwt` with no arguments should do something useful instead of showing help.\n\n## Current Behavior\n```\n$ gwt\nUsage: gwt [OPTIONS] COMMAND [ARGS]...\n...\n```\n\n## Proposed Behavior\n```\n$ gwt\nGoogle Workspace Tools v0.x.x\n\nStatus:\n  Authentication: ✓ logged in as user@example.com\n  Default output: ./exports\n\nNext steps:\n  gwt download \u003cURL\u003e         Export a Google Doc/Sheet/Slides\n  gwt mail -q \"from:boss\"    Export Gmail messages\n  gwt calendar -a 2024-01-01 Export calendar events\n  gwt --help                  Show all commands\n```\n\n## Implementation\n- Add default callback that runs when no command specified\n- Check auth status (catch errors gracefully)\n- Show helpful next steps\n- Still allow `gwt --help` for full help\n\n## Reference\nSee: agentic-cli.md Pattern 1 - 'Default: show status (safe, read-only) — NOT help!'","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-12T17:47:50.018304+01:00","created_by":"mhild","updated_at":"2026-01-12T17:47:50.018304+01:00"}
{"id":"google-workspace-tools-hlt","title":"Split CLI app.py into dedicated command files","description":"Split the 1200+ line app.py into domain-specific modules:\n\n## Proposed Structure\n```\ncli/commands/\n├── __init__.py\n├── download.py      # download, mirror (~314 lines)\n├── mail.py          # mail command (~110 lines)\n├── calendar.py      # calendar command (~228 lines)\n├── credentials.py   # credentials command (~274 lines)\n└── utility.py       # formats, extract_id, dump_schema, version (~152 lines)\n```\n\n## Tasks\n- [ ] Create cli/commands/ directory structure\n- [ ] Extract credentials command (biggest standalone chunk)\n- [ ] Extract calendar command\n- [ ] Extract download + mirror commands\n- [ ] Extract mail command\n- [ ] Extract utility commands (formats, extract_id, dump_schema, version)\n- [ ] Update app.py to assemble commands via typer subapps or imports\n- [ ] Update cli/__init__.py exports\n- [ ] Verify all tests pass\n\n## Benefits\n- Easier navigation and maintenance\n- Smaller files for faster comprehension\n- Domain separation (auth, export types, utilities)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T17:47:45.89962+01:00","created_by":"mhild","updated_at":"2026-01-12T17:47:45.89962+01:00"}
